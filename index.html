<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Faba Beans Trial CBA Decision Aid - Newcastle Business School</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body data-theme="worldbank-light">
  <div id="appRoot">
    <!-- Top bar -->
    <header id="topBar" class="app-header" role="banner">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true">NBS</div>
        <div class="brand-text">
          <div id="appTitle" class="brand-title">Faba Beans Trial Cost Benefit Decision Aid</div>
          <div id="appSubtitle" class="brand-subtitle">Newcastle Business School</div>
        </div>
      </div>

      <div class="header-actions" aria-label="Status and links">
        <span id="activeDatasetBadge" class="badge" title="Dataset status">Not loaded</span>
        <a id="navTechnicalAppendix" class="btn ghost" href="technical-appendix.html" target="_blank" rel="noopener">
          Technical appendix
        </a>
      </div>
    </header>

    <!-- Primary navigation -->
    <nav id="navPrimary" class="tabs-nav" aria-label="Main sections">
      <button id="navResults" type="button" class="tab-link active" aria-selected="true" aria-controls="tabResults">
        Results
      </button>
      <button id="navImport" type="button" class="tab-link" aria-selected="false" aria-controls="tabImport">
        Data import and validation
      </button>
      <button id="navDiagnostics" type="button" class="tab-link" aria-selected="false" aria-controls="tabDiagnostics">
        Diagnostics
      </button>
      <button id="navConfiguration" type="button" class="tab-link" aria-selected="false" aria-controls="tabConfiguration">
        Configuration
      </button>
      <button id="navAIBriefing" type="button" class="tab-link" aria-selected="false" aria-controls="tabAIBriefing">
        AI briefing
      </button>
      <button id="navExports" type="button" class="tab-link" aria-selected="false" aria-controls="tabExports">
        Exports
      </button>
    </nav>

    <main class="app-main" role="main">
      <!-- RESULTS TAB (default open) -->
      <section id="tabResults" class="tab-panel active show" aria-hidden="false" role="tabpanel" aria-label="Results">
        <div class="card">
          <div id="resultsHeader" class="results-header">
            <div class="results-title-block">
              <h1 class="h1">Comparison to control</h1>
              <p class="small muted">
                Results are computed from plot-level trial data using replicate-specific control baselines.
                All costs and benefits are shown in Australian dollars and tonnes per hectare where relevant.
              </p>
            </div>
            <div class="results-title-actions">
              <div id="resultsStatusLine" class="status-line" role="status" aria-live="polite">
                No dataset committed yet. Import data, validate, then commit to compute results.
              </div>
            </div>
          </div>

          <!-- Scenario bar -->
          <div id="scenarioBar" class="scenario-bar" aria-label="Scenario settings">
            <div class="scenario-grid">
              <div class="field">
                <label for="inputTimeHorizon" data-tooltip="Number of years used in the present value calculations.">
                  Time horizon (years)
                </label>
                <input id="inputTimeHorizon" type="number" min="1" step="1" value="10" />
              </div>

              <div class="field">
                <label for="selectPriceScenario" data-tooltip="Grain price used to value yield changes.">
                  Grain price (AUD per tonne)
                </label>
                <select id="selectPriceScenario"></select>
              </div>

              <div class="field">
                <label for="selectDiscountRate" data-tooltip="Discount rate used to compute present values.">
                  Discount rate
                </label>
                <select id="selectDiscountRate"></select>
              </div>

              <div class="field">
                <label for="selectPersistencePattern" data-tooltip="How long yield effects persist across years.">
                  Yield persistence
                </label>
                <select id="selectPersistencePattern"></select>
              </div>

              <div class="field">
                <label for="selectViewScale" data-tooltip="Choose whether results are shown per hectare or scaled to a target area.">
                  View scale
                </label>
                <select id="selectViewScale">
                  <option value="per_ha">Per hectare</option>
                  <option value="ha_100">100 hectares</option>
                  <option value="ha_3300">3300 hectares</option>
                </select>
              </div>

              <div class="field actions">
                <button id="btnManageScenarios" type="button" class="btn">
                  Manage scenarios
                </button>
              </div>
            </div>

            <div id="scenarioHelp" class="scenario-help small muted">
              Changes update rankings and comparison instantly. If the time horizon does not match the selected persistence vector length, the tool will adjust or warn.
            </div>
          </div>

          <!-- Leaderboard -->
          <div id="leaderboardCard" class="card subtle">
            <div class="card-header">
              <h2 class="h2">Snapshot leaderboard</h2>
              <div id="leaderboardFilters" class="btn-group" role="group" aria-label="Leaderboard filters">
                <button id="filterTopNPV" type="button" class="btn small">Top 5 by net present value</button>
                <button id="filterTopBCR" type="button" class="btn small">Top 5 by benefit cost ratio</button>
                <button id="filterOnlyImprovements" type="button" class="btn small">Show only improvements vs control</button>
                <button id="filterShowAll" type="button" class="btn small ghost">Show all</button>
              </div>
            </div>

            <div id="leaderboardTableWrap" class="table-scroll wide" aria-label="Leaderboard table">
              <table id="leaderboardTable" class="summary-table">
                <thead>
                  <tr>
                    <th>Rank</th>
                    <th>Treatment</th>
                    <th>Net present value</th>
                    <th>Present value of benefits</th>
                    <th>Present value of costs</th>
                    <th>Net present value (100 hectares)</th>
                    <th>Net present value (3300 hectares)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="7" class="muted small">No results yet. Commit a dataset to populate the leaderboard.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Comparison to Control -->
          <div id="comparisonCard" class="card subtle">
            <div class="card-header">
              <h2 class="h2">Comparison to control</h2>
              <p class="small muted">
                Indicators are rows and treatments are columns. The control column is pinned.
                Each treatment includes level values and deltas versus the control.
              </p>
            </div>

            <div id="comparisonTableWrap" class="table-scroll wide sticky-grid" aria-label="Comparison to control table">
              <table id="comparisonTable" class="comparison-table">
                <thead>
                  <tr>
                    <th class="sticky-col">Indicator</th>
                    <th class="sticky-head">Control (baseline)</th>
                    <th class="sticky-head">Treatments will appear after commit</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="sticky-col">Present value of benefits</td>
                    <td>Not available</td>
                    <td>Not available</td>
                  </tr>
                  <tr>
                    <td class="sticky-col">Present value of costs</td>
                    <td>Not available</td>
                    <td>Not available</td>
                  </tr>
                  <tr>
                    <td class="sticky-col">Net present value</td>
                    <td>Not available</td>
                    <td>Not available</td>
                  </tr>
                  <tr>
                    <td class="sticky-col">Benefit cost ratio</td>
                    <td>Not available</td>
                    <td>Not available</td>
                  </tr>
                  <tr>
                    <td class="sticky-col">Return on investment</td>
                    <td>Not available</td>
                    <td>Not available</td>
                  </tr>
                  <tr>
                    <td class="sticky-col">Rank</td>
                    <td>Not available</td>
                    <td>Not available</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div id="resultsNotes" class="small muted results-notes">
              Benefit cost ratio and return on investment are shown as “Not applicable” when present value of costs is zero or negative.
              Deltas are shown against the control under the selected scenario.
            </div>
          </div>

          <!-- What this means -->
          <div id="whatThisMeansCard" class="card subtle">
            <div class="card-header">
              <h2 class="h2">What this means</h2>
              <p class="small muted">
                This is a plain language summary for farmers and decision makers. It updates when the scenario changes.
              </p>
            </div>
            <div id="whatThisMeansText" class="narrative" aria-live="polite">
              Commit a dataset to generate a scenario-specific interpretation.
            </div>
          </div>
        </div>
      </section>

      <!-- IMPORT TAB -->
      <section id="tabImport" class="tab-panel" aria-hidden="true" role="tabpanel" aria-label="Data import and validation">
        <div class="card">
          <h1 class="h1">Data import and validation</h1>
          <p class="small muted">
            You can upload or paste the full trial dataset and the data dictionary. Then validate and commit.
            Missing values such as question marks and blanks are treated as missing, not zero.
          </p>

          <div id="importSteps" class="import-steps">
            <!-- Step 1: Dataset -->
            <div class="card subtle">
              <h2 class="h2">Step 1: Provide the trial dataset</h2>
              <div class="row-2">
                <div class="field">
                  <label for="inputDataFile" data-tooltip="Upload a full dataset file. Supported formats: TSV, CSV, and TXT.">
                    Upload dataset file (TSV, CSV, or TXT)
                  </label>
                  <input id="inputDataFile" type="file" accept=".tsv,.csv,.txt,text/tab-separated-values,text/csv,text/plain" />
                </div>
                <div class="field">
                  <label for="inputDataPaste" data-tooltip="Paste the full dataset as tab-delimited text. The first row should contain column headers.">
                    Or paste dataset (tab-delimited)
                  </label>
                  <textarea id="inputDataPaste" class="mono" rows="8" spellcheck="false" placeholder="Paste full dataset here (tab-delimited)"></textarea>
                </div>
              </div>
            </div>

            <!-- Step 2: Dictionary -->
            <div class="card subtle">
              <h2 class="h2">Step 2: Provide the data dictionary</h2>
              <div class="row-2">
                <div class="field">
                  <label for="inputDictFile" data-tooltip="Upload the full dictionary CSV. This is used for labels, units, tooltips, and validation messages.">
                    Upload dictionary file (CSV)
                  </label>
                  <input id="inputDictFile" type="file" accept=".csv,text/csv" />
                </div>
                <div class="field">
                  <label for="inputDictPaste" data-tooltip="Paste the full dictionary CSV. This is strongly recommended for future datasets and for clear tooltips.">
                    Or paste dictionary (CSV)
                  </label>
                  <textarea id="inputDictPaste" class="mono" rows="8" spellcheck="false" placeholder="Paste full dictionary CSV here"></textarea>
                </div>
              </div>
            </div>

            <!-- Step 3: Parse / Validate / Commit -->
            <div class="card subtle">
              <h2 class="h2">Step 3: Parse, validate, and commit</h2>
              <div class="toolbar">
                <button id="btnParseInputs" type="button" class="btn">Parse inputs</button>
                <button id="btnValidate" type="button" class="btn primary">Validate</button>
                <button id="btnCommit" type="button" class="btn primary">Commit dataset</button>
                <button id="btnResetSession" type="button" class="btn ghost">Reset session</button>
              </div>

              <div id="importStatus" class="status-line" role="status" aria-live="polite">
                No inputs parsed yet.
              </div>

              <div id="importWarnings" class="warnings" aria-live="polite"></div>

              <div class="row-2">
                <div id="importPreviewMeta" class="card subtle">
                  <h3 class="h3">Preview</h3>
                  <div class="small muted">
                    This preview summarises the import. The full dataset is used internally without truncation.
                  </div>
                  <div class="kv-grid" aria-label="Preview metadata">
                    <div class="kv"><div class="k">Rows</div><div class="v" data-preview="rows">0</div></div>
                    <div class="kv"><div class="k">Columns</div><div class="v" data-preview="cols">0</div></div>
                    <div class="kv"><div class="k">Replicates</div><div class="v" data-preview="replicates">0</div></div>
                    <div class="kv"><div class="k">Treatments</div><div class="v" data-preview="treatments">0</div></div>
                    <div class="kv"><div class="k">Controls</div><div class="v" data-preview="controls">0</div></div>
                    <div class="kv"><div class="k">Dictionary loaded</div><div class="v" data-preview="dict">No</div></div>
                  </div>
                </div>

                <div class="card subtle">
                  <h3 class="h3">Key fields check</h3>
                  <div class="small muted">
                    This table helps confirm the required columns are present before committing.
                  </div>
                  <div class="table-scroll">
                    <table id="previewKeyFieldsTable" class="summary-table">
                      <thead>
                        <tr>
                          <th>Field</th>
                          <th>Status</th>
                          <th>Notes</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>replicate_id</td>
                          <td class="muted">Not checked yet</td>
                          <td class="muted">Needed for replicate-specific control baselines</td>
                        </tr>
                        <tr>
                          <td>amendment_name</td>
                          <td class="muted">Not checked yet</td>
                          <td class="muted">Used for treatment names and control identification</td>
                        </tr>
                        <tr>
                          <td>treatment_id</td>
                          <td class="muted">Not checked yet</td>
                          <td class="muted">Control when treatment_id equals 1</td>
                        </tr>
                        <tr>
                          <td>yield_t_ha</td>
                          <td class="muted">Not checked yet</td>
                          <td class="muted">Used to compute yield changes and benefits</td>
                        </tr>
                        <tr>
                          <td>total_cost_per_ha_raw</td>
                          <td class="muted">Not checked yet</td>
                          <td class="muted">Used with the scaling rule to reconstruct total cost</td>
                        </tr>
                        <tr>
                          <td>cost_amendment_input_per_ha_raw</td>
                          <td class="muted">Not checked yet</td>
                          <td class="muted">Used for scaling rule and total cost reconstruction</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div id="dataChecksCard" class="card subtle">
                <h3 class="h3">Data checks: amendment cost scaling</h3>
                <p class="small muted">
                  If amendment input cost is larger than 1000 in the raw column, the tool treats it as being stored at about 100 times scale
                  and divides by 100 before reconstructing the total cost per hectare.
                </p>
                <div id="scalingRuleSummary" class="status-line">No scaling checks run yet.</div>

                <div class="table-scroll wide">
                  <table id="scalingRuleTable" class="summary-table">
                    <thead>
                      <tr>
                        <th>Amendment</th>
                        <th>Plots with scaling applied</th>
                        <th>Raw amendment input cost (summary)</th>
                        <th>Scaled amendment input cost (summary)</th>
                        <th>Adjusted total cost (summary)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td colspan="5" class="muted small">Validate the dataset to populate scaling checks.</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="card subtle">
                <h3 class="h3">Exports from imported data</h3>
                <p class="small muted">
                  These exports use the parsed and cleaned dataset and the computed summaries. They are designed to open cleanly in Excel.
                </p>
                <div class="toolbar">
                  <button id="btnExportCleanTSV" type="button" class="btn">Export cleaned dataset (TSV)</button>
                  <button id="btnExportTreatmentSummaryCSV" type="button" class="btn">Export treatment summary (CSV)</button>
                  <button id="btnExportSensitivityGridCSV" type="button" class="btn">Export full sensitivity grid (CSV)</button>
                  <button id="btnExportCSVPackZip" type="button" class="btn ghost">Export all as a pack</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- DIAGNOSTICS TAB -->
      <section id="tabDiagnostics" class="tab-panel" aria-hidden="true" role="tabpanel" aria-label="Diagnostics">
        <div class="card">
          <h1 class="h1">Diagnostics</h1>
          <p class="small muted">
            Diagnostics check replicate controls, missing critical fields, scaling triggers, and small sample sizes.
            Replicates without controls are excluded from delta calculations and will be clearly listed here.
          </p>

          <div class="toolbar">
            <button id="btnRunDiagnostics" type="button" class="btn primary">Run diagnostics</button>
          </div>

          <div id="diagnosticsSummaryCard" class="card subtle">
            <h2 class="h2">Diagnostics summary</h2>
            <div id="diagnosticsSummaryText" class="status-line" role="status" aria-live="polite">
              No diagnostics run yet.
            </div>
          </div>

          <div id="diagnosticsTableWrap" class="table-scroll wide" aria-label="Diagnostics table">
            <table id="diagnosticsTable" class="summary-table">
              <thead>
                <tr>
                  <th>Check</th>
                  <th>Status</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Replicates missing controls</td>
                  <td class="muted">Not checked yet</td>
                  <td class="muted">Validate and commit data, then run diagnostics</td>
                </tr>
                <tr>
                  <td>Missing or non numeric critical fields</td>
                  <td class="muted">Not checked yet</td>
                  <td class="muted">Yield and cost fields are required for present value calculations</td>
                </tr>
                <tr>
                  <td>Scaling rule triggers</td>
                  <td class="muted">Not checked yet</td>
                  <td class="muted">Shows where amendment input costs were adjusted</td>
                </tr>
                <tr>
                  <td>Treatments with few plots</td>
                  <td class="muted">Not checked yet</td>
                  <td class="muted">Still computed but flagged for uncertainty</td>
                </tr>
                <tr>
                  <td>Present value costs are zero or negative</td>
                  <td class="muted">Not checked yet</td>
                  <td class="muted">Benefit cost ratio and return on investment become not applicable</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- CONFIGURATION TAB -->
      <section id="tabConfiguration" class="tab-panel" aria-hidden="true" role="tabpanel" aria-label="Configuration">
        <div class="card">
          <h1 class="h1">Configuration</h1>
          <p class="small muted">
            Set cost recurrence and inclusion for each treatment. The control is read only and always included.
            Apply configuration to recompute rankings and comparison tables.
          </p>

          <div id="configSummaryCard" class="card subtle">
            <h2 class="h2">Current configuration at a glance</h2>
            <div id="configSummaryText" class="status-line" role="status" aria-live="polite">
              No dataset committed yet. Commit data to configure treatments.
            </div>
          </div>

          <div id="configTableWrap" class="table-scroll wide" aria-label="Configuration table">
            <table id="configTable" class="summary-table">
              <thead>
                <tr>
                  <th>Treatment</th>
                  <th>Is control</th>
                  <th>Cost recurrence</th>
                  <th>Include in rankings</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="muted">No treatments loaded</td>
                  <td class="muted">—</td>
                  <td class="muted">—</td>
                  <td class="muted">—</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="toolbar">
            <button id="btnApplyConfiguration" type="button" class="btn primary">Apply configuration</button>
            <button id="btnViewResultsSummary" type="button" class="btn">View results summary</button>
            <button id="btnSaveScenario" type="button" class="btn ghost">Save scenario</button>
            <button id="btnLoadScenario" type="button" class="btn ghost">Load scenario</button>
          </div>

          <div id="scenarioStoreStatus" class="status-line" role="status" aria-live="polite">
            No saved scenario action yet.
          </div>
        </div>
      </section>

      <!-- AI BRIEFING TAB -->
      <section id="tabAIBriefing" class="tab-panel" aria-hidden="true" role="tabpanel" aria-label="AI briefing">
        <div class="card">
          <h1 class="h1">AI briefing</h1>
          <div id="aiBriefingIntro" class="small muted">
            This tab prepares a copy-ready briefing prompt and a structured results JSON based only on computed results and the current scenario.
            The text is written for decision makers and farmers and avoids abbreviations.
          </div>

          <div class="row-2">
            <div class="field">
              <label for="aiBriefingPrompt" data-tooltip="Copy-ready prompt describing the dataset, scenario settings, rankings, trade-offs, sensitivity patterns, and uncertainty.">
                Briefing prompt (copy-ready)
              </label>
              <textarea id="aiBriefingPrompt" class="mono" rows="16" spellcheck="false"></textarea>

              <div class="toolbar">
                <button id="btnCopyBriefingPrompt" type="button" class="btn primary">Copy briefing prompt</button>
              </div>
            </div>

            <div class="field">
              <label for="aiResultsJSON" data-tooltip="Structured JSON containing scenario settings, treatment results, deltas versus control, and rankings.">
                Results JSON (structured)
              </label>
              <textarea id="aiResultsJSON" class="mono" rows="16" spellcheck="false" readonly></textarea>

              <div class="toolbar">
                <button id="btnCopyResultsJSON" type="button" class="btn">Copy results JSON</button>
              </div>
            </div>
          </div>

          <div id="aiBriefingStatus" class="status-line" role="status" aria-live="polite">
            No briefing generated yet.
          </div>
        </div>
      </section>

      <!-- EXPORTS TAB -->
      <section id="tabExports" class="tab-panel" aria-hidden="true" role="tabpanel" aria-label="Exports">
        <div class="card">
          <h1 class="h1">Exports</h1>
          <div id="exportsIntro" class="small muted">
            Export the current scenario slice or a workbook-like file if supported by your browser. These outputs are designed to open cleanly in Excel and to be copied into Word.
          </div>

          <div id="exportButtonsGroup" class="toolbar" role="group" aria-label="Export actions">
            <button id="btnExportResultsSliceCSV" type="button" class="btn primary">Export current results slice (CSV)</button>
            <button id="btnExportResultsSliceTSV" type="button" class="btn">Export current results slice (TSV)</button>
            <button id="btnExportWorkbookXLSX" type="button" class="btn ghost">Export workbook-like file (XLSX)</button>
          </div>

          <div id="exportStatus" class="status-line" role="status" aria-live="polite">
            No export prepared yet.
          </div>

          <hr />

          <div class="card subtle">
            <h2 class="h2">Data exports</h2>
            <p class="small muted">
              These exports are also available from the import tab once data is parsed and validated.
            </p>
            <div class="toolbar">
              <button id="btnExportCleanTSV" type="button" class="btn">Export cleaned dataset (TSV)</button>
              <button id="btnExportTreatmentSummaryCSV" type="button" class="btn">Export treatment summary (CSV)</button>
              <button id="btnExportSensitivityGridCSV" type="button" class="btn">Export full sensitivity grid (CSV)</button>
              <button id="btnExportCSVPackZip" type="button" class="btn ghost">Export all as a pack</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Global modal -->
    <div id="modalOverlay" class="modal-overlay" hidden></div>
    <div id="modalShell" class="modal-shell" role="dialog" aria-modal="true" aria-labelledby="modalTitle" hidden>
      <div class="modal-card">
        <div class="modal-header">
          <div id="modalTitle" class="modal-title">Dialog</div>
          <button id="modalClose" type="button" class="btn small ghost" aria-label="Close dialog">Close</button>
        </div>
        <div id="modalBody" class="modal-body">
          <section id="modalScenarioManager" class="scenario-manager" aria-label="Scenario manager">
            <div class="row-2">
              <div class="card subtle">
                <h3 class="h3">Grain prices</h3>
                <p class="small muted">Add or remove prices used in the sensitivity grid.</p>
                <div class="row-inline">
                  <label class="sr-only" for="inputAddPrice">Add price</label>
                  <input id="inputAddPrice" type="number" min="0" step="1" placeholder="e.g., 450" />
                  <button id="btnAddPrice" type="button" class="btn small">Add</button>
                </div>
                <div id="managePricesList" class="list-box" aria-label="Price scenarios list"></div>
              </div>

              <div class="card subtle">
                <h3 class="h3">Discount rates</h3>
                <p class="small muted">Add or remove discount rates used in the sensitivity grid.</p>
                <div class="row-inline">
                  <label class="sr-only" for="inputAddDiscount">Add discount rate</label>
                  <input id="inputAddDiscount" type="number" min="0" step="0.001" placeholder="e.g., 0.07" />
                  <button id="btnAddDiscount" type="button" class="btn small">Add</button>
                </div>
                <div id="manageDiscountsList" class="list-box" aria-label="Discount rate list"></div>
              </div>
            </div>

            <div class="card subtle">
              <h3 class="h3">Yield persistence patterns</h3>
              <p class="small muted">
                Add a pattern by providing a name and a comma separated vector. Example: 1, 0.5, 0.25
              </p>
              <div class="row-2">
                <div class="field">
                  <label for="inputPersistenceName" data-tooltip="Short name for the pattern used in scenario selection.">
                    Pattern name
                  </label>
                  <input id="inputPersistenceName" type="text" placeholder="e.g., 3yr_decay" />
                </div>
                <div class="field">
                  <label for="inputPersistenceVector" data-tooltip="Comma separated numbers representing the effect multiplier in each year.">
                    Pattern vector
                  </label>
                  <input id="inputPersistenceVector" type="text" placeholder="e.g., 1, 0.5, 0.25, 0, 0" />
                </div>
              </div>
              <div class="toolbar">
                <button id="btnAddPersistence" type="button" class="btn small">Add pattern</button>
                <button id="btnSaveScenarioManager" type="button" class="btn primary">Save and apply</button>
              </div>
              <div id="managePersistenceList" class="list-box" aria-label="Persistence pattern list"></div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- Toasts -->
    <div id="toastHost" class="toast-host" aria-label="Notifications">
      <div id="toastRegion" class="sr-only" role="status" aria-live="polite"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
